# Form 功能测试指南

## 🎯 测试目标

全面测试 `@admin-core/layouts` 中 form 包的所有功能，确保现代化改造后的代码正常工作。

## ✅ 已启动

开发服务器已成功启动：
- **URL**: http://localhost:3001/
- **端口**: 3001
- **状态**: ✅ 运行中

## 📋 测试清单

### 1. 基础表单功能 (BasicFormDemo)

**测试项目**:
- [ ] 输入字段正常显示
- [ ] 输入值正常绑定
- [ ] 表单提交功能
- [ ] 表单重置功能
- [ ] 验证错误提示
- [ ] API 方法调用

**测试步骤**:
1. 打开"基础表单"标签页
2. 在各个字段中输入数据
3. 点击"提交"按钮，查看提交结果
4. 点击"重置"按钮，查看表单是否清空
5. 测试 API 按钮：
   - 设置用户名
   - 获取所有值
   - 重置表单
   - 触发验证

**预期结果**:
- 所有输入正常响应
- 提交后显示绿色成功提示
- 重置后表单清空
- API 操作正常工作

---

### 2. 表单验证功能 (ValidationDemo)

**测试项目**:
- [ ] 必填验证
- [ ] 最小长度验证
- [ ] 最大长度验证
- [ ] 正则表达式验证
- [ ] 数字范围验证
- [ ] URL 格式验证
- [ ] 自定义验证规则

**测试步骤**:
1. 打开"表单验证"标签页
2. 尝试提交空表单，查看必填错误
3. 输入不符合规则的数据：
   - 少于5个字符（最小长度）
   - 超过10个字符（最大长度）
   - 不符合正则的字符串
   - 超出范围的数字
   - 无效的URL
   - 包含"admin"的文本
4. 输入正确数据，验证通过

**预期结果**:
- 每个字段显示相应的错误提示
- 错误提示清晰准确
- 验证通过后可以提交

---

### 3. 字段依赖功能 (DependenciesDemo)

**测试项目**:
- [ ] 条件显示 (show)
- [ ] 条件渲染 (if)
- [ ] 动态禁用 (disabled)
- [ ] 动态必填 (required)
- [ ] 字段联动

**测试步骤**:
1. 打开"字段依赖"标签页
2. 切换用户类型：
   - 选择"个人用户"，公司字段应隐藏
   - 选择"企业用户"，公司字段应显示
3. 勾选"填写地址"复选框：
   - 地址字段应显示
   - 取消勾选，地址字段应隐藏
4. 测试同意条款：
   - 未勾选时，提交按钮应禁用
   - 勾选后，提交按钮应启用

**预期结果**:
- 字段根据依赖条件正确显示/隐藏
- 禁用状态正确切换
- 必填标记动态变化

---

### 4. 动态表单功能 (DynamicFormDemo)

**测试项目**:
- [ ] 动态添加字段
- [ ] 动态删除字段
- [ ] 动态修改字段属性
- [ ] 表单响应式更新

**测试步骤**:
1. 打开"动态表单"标签页
2. 点击"添加字段"按钮多次
3. 点击"删除"按钮移除字段
4. 点击字段的"禁用/启用"按钮
5. 在动态字段中输入数据
6. 提交表单查看所有字段值

**预期结果**:
- 字段动态添加/删除正常
- 字段属性动态修改生效
- 表单值正确收集

---

### 5. 布局模式功能 (LayoutDemo)

**测试项目**:
- [ ] 水平布局 (horizontal)
- [ ] 垂直布局 (vertical)
- [ ] 内联布局 (inline)
- [ ] 栅格布局 (grid)
- [ ] 紧凑模式 (compact)
- [ ] 响应式布局

**测试步骤**:
1. 打开"布局模式"标签页
2. 查看各种布局模式的显示效果
3. 调整浏览器窗口大小，测试响应式
4. 对比紧凑模式和普通模式的间距

**预期结果**:
- 各种布局正确显示
- 响应式布局在不同屏幕尺寸下正常
- 紧凑模式间距更小

---

### 6. 高级功能 (AdvancedDemo)

**测试项目**:
- [ ] 折叠展开功能
- [ ] 自定义渲染
- [ ] 后缀/描述
- [ ] 帮助提示
- [ ] API 操作

**测试步骤**:
1. 打开"高级功能"标签页
2. 测试折叠展开：
   - 点击"折叠"按钮
   - 点击"展开"按钮
   - 观察字段显示/隐藏
3. 查看自定义渲染效果：
   - 后缀文本
   - 描述信息
   - 帮助提示图标
4. 测试 API 操作：
   - 设置所有值
   - 获取所有值
   - 设置单个字段
   - 验证字段
   - 重置表单

**预期结果**:
- 折叠展开动画流畅
- 自定义内容正确显示
- 所有 API 操作正常

---

## 🔍 重点测试项

### ES2024+ 特性验证

确保以下现代化特性正常工作：

1. **Object.hasOwn()** - 检查对象属性
2. **Object.fromEntries()** - 对象构造
3. **structuredClone()** - 深度克隆
4. **Map 数据结构** - O(1) 查找
5. **for...of 循环** - 迭代
6. **?? 空值合并** - 默认值处理
7. **?. 可选链** - 安全访问

### Vue 3 特性验证

1. **Composition API** - 组合式函数
2. **响应式系统** - ref/computed
3. **生命周期钩子** - onMounted/onUnmounted
4. **模板引用** - useTemplateRef

### TypeScript 特性验证

1. **类型推断** - 自动类型推导
2. **类型守卫** - 类型检查
3. **泛型** - 类型参数
4. **严格模式** - 严格类型检查

---

## 🐛 问题报告

如果发现问题，请记录以下信息：

1. **问题描述**: 详细描述问题
2. **复现步骤**: 如何触发问题
3. **预期行为**: 应该如何工作
4. **实际行为**: 实际发生了什么
5. **浏览器信息**: 浏览器类型和版本
6. **控制台错误**: 浏览器控制台的错误信息

---

## 📊 测试结果

### 测试环境
- **Node.js**: v20+
- **pnpm**: v9+
- **浏览器**: Chrome/Firefox/Safari
- **操作系统**: Windows/macOS/Linux

### 测试状态
- [ ] 基础表单功能
- [ ] 表单验证功能
- [ ] 字段依赖功能
- [ ] 动态表单功能
- [ ] 布局模式功能
- [ ] 高级功能

### 总体评估
- **通过率**: ___%
- **严重问题**: ___个
- **一般问题**: ___个
- **建议改进**: ___个

---

## 🎉 测试完成

完成所有测试后，请：

1. 填写测试结果
2. 记录发现的问题
3. 提交测试报告
4. 关闭开发服务器

**关闭服务器命令**:
```bash
# 按 Ctrl+C 停止开发服务器
```

---

## 📚 相关文档

- [Form API 文档](../src/form/README.md)
- [README](./README.md)
- [Zod 文档](https://zod.dev/)
- [vee-validate 文档](https://vee-validate.logaretm.com/)
